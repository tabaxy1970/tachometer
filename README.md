# tachometer
XLR250Bajaにはタコメーターが無い。作るしか。

・PICで7セグ4桁のタコメーターを作る。

・趣味の工作です。

プログラムはできたが、ハードウェアは点火タイミングのパルスを取るところで詰まってかれこれ2年頓挫。
一秒カウントして６０倍する馬鹿げた実装では無い。
割り込みを利用し、カウンターに確か20MHzを突っ込んで点火から点火までの時間を計測してRPMを表示するのでリアルタイム更新である。

・パルスゲット

初期はスパークコイルの一次側から取っていたのが行き詰まる原因であった。
いくら一次側とはいえかなりの電圧で、そこから弱電な素子に入力させようとする事自体が無理ゲーである。
気を取り直してCDIへ点火パルスを送るハーネスからパルスを取る事と、良さげな電圧範囲でした。
4Vp-pぐらいのパルスなのでダイオードで直流化して2SC1815で増幅したものを割り込みピン(RB0/INT)にプルダウンで接続。
パルスにノイズが結構あるのでCRローパスフィルターを前段に噛ませる。R=220 C=4.7uF カットオフ周波数 150Hz
動作の様子は、
https://youtu.be/-MtcJ4j0DM0
